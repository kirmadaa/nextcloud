/*! For license information please see mail.319.1f9fabebd5f4089ccef4.js.LICENSE.txt */
(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[319,471],{35630:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});const i=(0,a(27380).A)()},51648:(t,e,a)=>{"use strict";a.d(e,{T:()=>n});var i=a(53334);const n=t=>{if(t.specialUse.length>0)try{return(t=>{if(t.specialUse.includes("all"))return(0,i.Tl)("mail","All");if(t.specialUse.includes("archive"))return(0,i.Tl)("mail","Archive");if(t.specialUse.includes("drafts"))return(0,i.Tl)("mail","Drafts");if(t.specialUse.includes("flagged"))return(0,i.Tl)("mail","Favorites");if(t.specialUse.includes("inbox"))return t.isPriorityInbox?(0,i.Tl)("mail","Priority inbox"):t.isUnified?(0,i.Tl)("mail","All inboxes"):(0,i.Tl)("mail","Inbox");if(t.specialUse.includes("junk"))return(0,i.Tl)("mail","Junk");if(t.specialUse.includes("sent"))return(0,i.Tl)("mail","Sent");if(t.specialUse.includes("trash"))return(0,i.Tl)("mail","Trash");throw new Error("unknown special use ".concat(t.specialUse))})(t)}catch(t){console.error("could not translate special mailbox",t)}return t.displayName}},37528:(t,e,a)=>{"use strict";a.d(e,{E:()=>s,I:()=>o});var i=a(63814),n=a(65043);async function o(t,e,a){const o=(0,i.Jv)("/apps/mail/api/trustedsenders/{email}?type={type}",{email:t,type:e});a?await n.Ay.put(o):await n.Ay.delete(o)}async function s(){const t=(0,i.Jv)("/apps/mail/api/trustedsenders");return(await n.Ay.get(t)).data.data}},28290:(t,e,a)=>{"use strict";function i(t,e){if(!t.myAcls)return!0;const a=[...t.myAcls];for(const t of[...e])if(!a.includes(t))return!1;return!0}a.d(e,{w:()=>i})},78604:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"p.app-settings span.loading-icon[data-v-acb6365a]{display:inline-block;vertical-align:middle;padding:5px 0}p.app-settings[data-v-acb6365a]{padding:10px 0}.app-settings-button[data-v-acb6365a]{display:inline-flex;background-position:10px center;text-align:left;margin-top:6px}.app-settings-button.button.primary.new-button[data-v-acb6365a]{color:var(--color-primary-element-text);padding-left:34px;gap:4px;width:fit-content}.app-settings-link[data-v-acb6365a]{text-decoration:underline}[data-v-acb6365a] .button-vue__text{text-overflow:clip;white-space:normal}[data-v-acb6365a] .button-vue__wrapper{justify-content:flex-start}.mailvelope-section[data-v-acb6365a]{padding-top:15px}.mailvelope-section a.button[data-v-acb6365a]{display:flex;align-items:center;line-height:normal;min-height:44px;font-size:unset}.mailvelope-section a.button[data-v-acb6365a]:focus-visible,.mailvelope-section a.button[data-v-acb6365a]:hover{box-shadow:0 0 0 1px var(--color-primary-element)}.material-design-icon.lock-icon[data-v-acb6365a]{margin-right:10px}.section-title[data-v-acb6365a]{margin-top:20px;margin-bottom:10px}.sorting[data-v-acb6365a]{display:flex;width:100%}.sorting__switch[data-v-acb6365a]{width:50%}.mail-creation-button[data-v-acb6365a]{width:100%}.settings-hint[data-v-acb6365a]{margin-top:-12px;margin-bottom:6px;color:var(--color-text-maxcontrast)}.app-settings-section[data-v-acb6365a]{list-style:none}","",{version:3,sources:["webpack://./src/components/AppSettingsMenu.vue"],names:[],mappings:"AACA,kDACC,oBAAA,CACA,qBAAA,CACA,aAAA,CAED,gCACC,cAAA,CAED,sCACC,mBAAA,CACA,+BAAA,CACA,eAAA,CACA,cAAA,CAED,gEACC,uCAAA,CAEA,iBAAA,CACA,OAAA,CACA,iBAAA,CAED,oCACC,yBAAA,CAED,oCACC,kBAAA,CACA,kBAAA,CAED,uCACC,0BAAA,CAED,qCACC,gBAAA,CAEA,8CACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CAEA,gHAEC,iDAAA,CAKF,iDACC,iBAAA,CAIF,gCACC,eAAA,CACA,kBAAA,CAED,0BACC,YAAA,CACA,UAAA,CACA,kCACC,SAAA,CAGF,uCACC,UAAA,CAED,gCACC,gBAAA,CACA,iBAAA,CACA,mCAAA,CAED,uCACC,eAAA",sourcesContent:["\np.app-settings span.loading-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 5px 0;\n}\np.app-settings {\n\tpadding: 10px 0;\n}\n.app-settings-button {\n\tdisplay: inline-flex;\n\tbackground-position: 10px center;\n\ttext-align: left;\n\tmargin-top: 6px;\n}\n.app-settings-button.button.primary.new-button {\n\tcolor: var(--color-primary-element-text);\n\t//this style will be removed after we migrate also the  'add mail account' to material design\n\tpadding-left: 34px;\n\tgap: 4px;\n\twidth: fit-content;\n}\n.app-settings-link {\n\ttext-decoration: underline;\n}\n:deep(.button-vue__text) {\n\ttext-overflow: clip;\n\twhite-space: normal;\n}\n:deep(.button-vue__wrapper) {\n\tjustify-content: flex-start;\n}\n.mailvelope-section {\n\tpadding-top: 15px;\n\n\ta.button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tline-height: normal;\n\t\tmin-height: 44px;\n\t\tfont-size: unset;\n\n\t\t&:focus-visible,\n\t\t&:hover {\n\t\t\tbox-shadow: 0 0 0 1px var(--color-primary-element);\n\t\t}\n\t}\n}\n.material-design-icon {\n\t&.lock-icon {\n\t\tmargin-right: 10px;\n\t}\n\n}\n.section-title {\n\tmargin-top: 20px;\n\tmargin-bottom: 10px;\n}\n.sorting {\n\tdisplay: flex;\n\twidth: 100%;\n\t&__switch{\n\t\twidth: 50%;\n\t}\n}\n.mail-creation-button {\n\twidth: 100%;\n}\n.settings-hint {\n\tmargin-top: -12px;\n\tmargin-bottom: 6px;\n\tcolor: var(--color-text-maxcontrast);\n}\n.app-settings-section {\n\tlist-style: none;\n}\n"],sourceRoot:""}]);const r=s},6413:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"[data-v-940b16c0] .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:600px !important;max-height:500px !important}.modal-content[data-v-940b16c0]{display:flex;box-sizing:border-box;width:100%;height:100%;flex-direction:column;padding:15px}.crumbs[data-v-940b16c0]{display:inline-flex;padding-right:0px;flex-wrap:wrap}.crumbs .level[data-v-940b16c0]{display:inline-flex;height:44px;min-width:0px;flex:0 0 auto;order:1;padding-right:7px;background-position:right center;background-size:auto 24px;margin-top:-10px}.crumbs a[data-v-940b16c0]{position:relative;padding:12px;opacity:.5;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:0 0 auto;min-width:0px;max-width:200px}.crumbs a[data-v-940b16c0]:hover{opacity:.7}.crumbs a.icon-home[data-v-940b16c0]{width:0px;background-position:left center}.mailbox-list[data-v-940b16c0]{display:inline-block;width:100%;height:100%;overflow-y:auto;flex:1}.mailbox-list li[data-v-940b16c0]{display:flex;cursor:pointer}.mailbox-list li[data-v-940b16c0]:hover{background-color:var(--color-background-hover)}.mailbox-list li[data-v-940b16c0]:not(:last-child){border-bottom:1px solid var(--color-border)}.mailbox-list h2[data-v-940b16c0]{width:100%;color:var(--color-text-maxcontrast);text-align:center;margin-top:80px;opacity:.4;background-size:64px;height:64px}.mailbox-list .mailbox-icon[data-v-940b16c0]{width:24px;height:24px;padding:14px;opacity:.9;background-size:24px}.mailbox-list .mailbox-title[data-v-940b16c0]{padding:14px 14px 14px 0;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.buttons[data-v-940b16c0]{display:flex;justify-content:flex-end;padding-top:10px}.buttons .spinner[data-v-940b16c0]{margin-right:5px}.material-design-icon[data-v-940b16c0]{opacity:.7;margin-right:6px}","",{version:3,sources:["webpack://./src/components/MailboxPicker.vue"],names:[],mappings:"AACA,mCACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAGD,gCACC,YAAA,CACA,qBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,YAAA,CAGD,yBACC,mBAAA,CACA,iBAAA,CACA,cAAA,CAEA,gCACC,mBAAA,CACA,WAAA,CACA,aAAA,CACA,aAAA,CACA,OAAA,CACA,iBAAA,CACA,gCAAA,CACA,yBAAA,CACA,gBAAA,CAGD,2BACC,iBAAA,CACA,YAAA,CACA,UAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,aAAA,CACA,aAAA,CACA,eAAA,CAEA,iCACC,UAAA,CAIF,qCACC,SAAA,CACA,+BAAA,CAIF,+BACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,MAAA,CAEA,kCACC,YAAA,CACA,cAAA,CAEA,wCACC,8CAAA,CAGD,mDACC,2CAAA,CAIF,kCACC,UAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,oBAAA,CACA,WAAA,CAGD,6CACC,UAAA,CACA,WAAA,CACA,YAAA,CACA,UAAA,CACA,oBAAA,CAGD,8CACC,wBAAA,CACA,MAAA,CACA,eAAA,CACA,kBAAA,CACA,sBAAA,CAIF,0BACC,YAAA,CACA,wBAAA,CACA,gBAAA,CAEA,mCACC,gBAAA,CAGF,uCACC,UAAA,CACA,gBAAA",sourcesContent:["\n:deep(.modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 600px !important;\n\tmax-height: 500px !important;\n}\n\n.modal-content {\n\tdisplay: flex;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\tflex-direction: column;\n\tpadding: 15px;\n}\n\n.crumbs {\n\tdisplay: inline-flex;\n\tpadding-right: 0px;\n\tflex-wrap: wrap;\n\n\t.level {\n\t\tdisplay: inline-flex;\n\t\theight: 44px;\n\t\tmin-width: 0px;\n\t\tflex: 0 0 auto;\n\t\torder: 1;\n\t\tpadding-right: 7px;\n\t\tbackground-position: right center;\n\t\tbackground-size: auto 24px;\n\t\tmargin-top: -10px;\n\t}\n\n\ta {\n\t\tposition: relative;\n\t\tpadding: 12px;\n\t\topacity: 0.5;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\tflex: 0 0 auto;\n\t\tmin-width: 0px;\n\t\tmax-width: 200px;\n\n\t\t&:hover {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\n\ta.icon-home {\n\t\twidth: 0px;\n\t\tbackground-position: left center;\n\t}\n}\n\n.mailbox-list {\n\tdisplay: inline-block;\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: auto;\n\tflex: 1;\n\n\tli {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\n\t\t&:not(:last-child) {\n\t\t\tborder-bottom: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\th2 {\n\t\twidth: 100%;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tmargin-top: 80px;\n\t\topacity: 0.4;\n\t\tbackground-size: 64px;\n\t\theight: 64px;\n\t}\n\n\t.mailbox-icon {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tpadding: 14px;\n\t\topacity: 0.9;\n\t\tbackground-size: 24px;\n\t}\n\n\t.mailbox-title {\n\t\tpadding: 14px 14px 14px 0;\n\t\tflex: 1;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n.buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding-top: 10px;\n\n\t.spinner {\n\t\tmargin-right: 5px;\n\t}\n}\n.material-design-icon {\n\topacity: .7;\n\tmargin-right: 6px;\n}\n"],sourceRoot:""}]);const r=s},28043:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".button[data-v-0dd2ec61]{width:44px;height:44px;background-color:var(--color-main-background);border:none;display:inline-block;position:absolute;margin-left:254px;margin-top:13px;opacity:.7}.button[data-v-0dd2ec61]:hover,.button[data-v-0dd2ec61]:focus{opacity:1;background-color:var(--color-background-hover)}.button[data-v-0dd2ec61]:disabled{cursor:not-allowed;opacity:.5;animation:rotation-0dd2ec61 2s linear}[data-v-0dd2ec61] .app-navigation-new button{width:240px !important;height:44px}@keyframes rotation-0dd2ec61{from{transform:rotate(0deg)}to{transform:rotate(-360deg)}}.app-navigation-spacer[data-v-0dd2ec61]{order:0 !important}[data-v-0dd2ec61] .settings-button{font-weight:bold !important;z-index:1}.outbox[data-v-0dd2ec61]{margin-left:6px;width:auto}.outbox__border[data-v-0dd2ec61]{border-top:1px solid var(--color-background-darker)}.outbox[data-v-0dd2ec61] .app-navigation-entry.active{background-color:rgba(0,0,0,0) !important}.mail-settings[data-v-0dd2ec61]{padding:calc(var(--default-grid-baseline, 4px)*2)}.mail-settings__button[data-v-0dd2ec61]{width:100% !important;justify-content:start !important}","",{version:3,sources:["webpack://./src/components/Navigation.vue"],names:[],mappings:"AACA,yBACC,UAAA,CACA,WAAA,CACA,6CAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,8DAEC,SAAA,CACA,8CAAA,CAED,kCACC,kBAAA,CACA,UAAA,CACA,qCAAA,CAGF,6CACC,sBAAA,CACA,WAAA,CAED,6BACA,KACC,sBAAA,CAED,GACE,yBAAA,CAAA,CAGF,wCACC,kBAAA,CAED,mCACC,2BAAA,CACA,SAAA,CAED,yBACC,eAAA,CACA,UAAA,CACA,iCACC,mDAAA,CAGA,sDACC,yCAAA,CAIH,gCACC,iDAAA,CAEA,wCACC,qBAAA,CACA,gCAAA",sourcesContent:["\n.button {\n\twidth: 44px;\n\theight: 44px;\n\tbackground-color: var(--color-main-background);\n\tborder: none;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-left: 254px;\n\tmargin-top: 13px;\n\topacity: .7;\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t\tbackground-color:var(--color-background-hover);\n\t}\n\t&:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: .5;\n\t\tanimation: rotation 2s linear;\n\t}\n}\n:deep(.app-navigation-new button) {\n\twidth: 240px !important;\n\theight: 44px;\n}\n@keyframes rotation {\nfrom {\n\ttransform: rotate(-0deg);\n}\nto {\n\t\ttransform: rotate(-360deg);\n\t}\n}\n.app-navigation-spacer {\n\torder: 0 !important;\n}\n:deep(.settings-button) {\n\tfont-weight: bold !important;\n\tz-index: 1;\n}\n.outbox {\n\tmargin-left: 6px;\n\twidth: auto;\n\t&__border {\n\t\tborder-top: 1px solid var(--color-background-darker);\n\t}\n\t:deep(.app-navigation-entry) {\n\t\t&.active {\n\t\t\tbackground-color: transparent !important;\n\t\t}\n\t}\n}\n.mail-settings {\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\n\t&__button {\n\t\twidth: 100% !important;\n\t\tjustify-content: start !important;\n\n\t}\n}\n\n"],sourceRoot:""}]);const r=s},52701:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"[data-v-a2b1891e] .app-navigation-entry__title{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./src/components/NavigationAccountExpandCollapse.vue"],names:[],mappings:"AACA,+CACC,mCAAA",sourcesContent:["\n:deep(.app-navigation-entry__title) {\n\tcolor: var(--color-text-maxcontrast);\n}\n"],sourceRoot:""}]);const r=s},82411:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".counter-bubble__counter[data-v-4cbe63d2]{max-width:initial}","",{version:3,sources:["webpack://./src/components/NavigationMailbox.vue"],names:[],mappings:"AACA,0CACC,iBAAA",sourcesContent:["\n.counter-bubble__counter {\n\tmax-width: initial;\n}\n"],sourceRoot:""}]);const r=s},11649:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".navigation-outbox__unread-counter[data-v-51f8f325]{margin-right:calc(var(--default-grid-baseline)*2)}.outbox-opacity-icon[data-v-51f8f325]{opacity:.7}.outbox-opacity-icon[data-v-51f8f325]:hover{opacity:1}","",{version:3,sources:["webpack://./src/components/NavigationOutbox.vue"],names:[],mappings:"AAEC,oDACC,iDAAA,CAIF,sCACC,UAAA,CACA,4CACC,SAAA",sourcesContent:["\n.navigation-outbox {\n\t&__unread-counter {\n\t\tmargin-right: calc(var(--default-grid-baseline)*2);\n\t}\n}\n\n.outbox-opacity-icon {\n\topacity: .7;\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const r=s},77435:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".header[data-v-1e4c1175]{display:flex;align-items:center;justify-content:space-between;padding:calc(var(--default-grid-baseline, 4px)*2);gap:4px;height:61px}.refresh__button[data-v-1e4c1175]{background-color:rgba(0,0,0,0)}.new-message-button[data-v-1e4c1175]{background-image:var(--gradient-primary-background)}","",{version:3,sources:["webpack://./src/components/NewMessageButtonHeader.vue"],names:[],mappings:"AACA,yBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iDAAA,CACA,OAAA,CACA,WAAA,CAED,kCACC,8BAAA,CAED,qCACC,mDAAA",sourcesContent:["\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\tgap: 4px;\n\theight: 61px;\n}\n.refresh__button {\n\tbackground-color: transparent;\n}\n.new-message-button {\n\tbackground-image: var(--gradient-primary-background);\n}\n"],sourceRoot:""}]);const r=s},36133:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".button-vue[data-v-19c067d8] {display:inline-block !important}","",{version:3,sources:["webpack://./src/components/TrustedSenders.vue"],names:[],mappings:"AACA,8BACC,+BAAA",sourcesContent:["\n.button-vue:deep() {\n\tdisplay: inline-block !important;\n}\n"],sourceRoot:""}]);const r=s},4503:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".empty-content[data-v-86f871f0]{height:100%;display:flex}.certificate-modal[data-v-86f871f0]{padding:20px}.certificate-modal__list table[data-v-86f871f0]{table-layout:fixed;width:100%}.certificate-modal__list table th[data-v-86f871f0]{color:var(--color-text-maxcontrast)}.certificate-modal__list table th[data-v-86f871f0],.certificate-modal__list table td[data-v-86f871f0]{padding:2.5px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:5 1 0px}.certificate-modal__list table th[data-v-86f871f0]:last-child,.certificate-modal__list table td[data-v-86f871f0]:last-child{flex:1 1 0px}.certificate-modal__list table span[data-v-86f871f0]{text-overflow:ellipsis}.certificate-modal__list table tr[data-v-86f871f0]{display:flex;flex-direction:row;align-items:center}.certificate-modal__list table tr[data-v-86f871f0]:hover{background-color:unset}.certificate-modal__list__actions[data-v-86f871f0]{margin:12px;float:right}.certificate-modal__import[data-v-86f871f0]{display:flex;flex-direction:column;gap:10px}.certificate-modal__import input[type=file][data-v-86f871f0]{display:flex;width:100%}.certificate-modal__import__type[data-v-86f871f0]{display:flex;gap:0 20px;flex-wrap:wrap}.certificate-modal__import__type>div[data-v-86f871f0]{display:flex;gap:5px;align-items:center}.certificate-modal__import__hints[data-v-86f871f0]{color:var(--color-text-maxcontrast)}.certificate-modal__import__actions[data-v-86f871f0]{display:flex;justify-content:space-between;gap:15px}","",{version:3,sources:["webpack://./src/components/smime/SmimeCertificateModal.vue"],names:[],mappings:"AACA,gCACC,WAAA,CACA,YAAA,CAED,oCACC,YAAA,CAGC,gDACC,kBAAA,CACA,UAAA,CAEA,mDACC,mCAAA,CAGD,sGACC,aAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,YAAA,CAGD,4HACC,YAAA,CAGD,qDACC,sBAAA,CAGD,mDACC,YAAA,CACA,kBAAA,CACA,kBAAA,CAID,yDACC,sBAAA,CAIF,mDACC,WAAA,CACA,WAAA,CAIF,4CACC,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,6DACC,YAAA,CACA,UAAA,CAGD,kDACC,YAAA,CACA,UAAA,CACA,cAAA,CAEA,sDACC,YAAA,CACA,OAAA,CACA,kBAAA,CAIF,mDACC,mCAAA,CAGD,qDACC,YAAA,CACA,6BAAA,CACA,QAAA",sourcesContent:["\n.empty-content{\n\theight: 100%;\n\tdisplay: flex;\n}\n.certificate-modal {\n\tpadding: 20px;\n\n\t&__list {\n\t\ttable {\n\t\t\ttable-layout: fixed;\n\t\t\twidth: 100%;\n\n\t\t\tth {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\tth, td {\n\t\t\t\tpadding: 2.5px;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\tflex: 5 1 0px;\n\t\t\t}\n\n\t\t\tth:last-child, td:last-child {\n\t\t\t\tflex: 1 1 0px;\n\t\t\t}\n\n\t\t\tspan {\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t}\n\n\t\t\ttr {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\talign-items: center;\n\t\t\t}\n\n\t\t\t// Disable default hover style\n\t\t\ttr:hover {\n\t\t\t\tbackground-color: unset;\n\t\t\t}\n\t\t}\n\n\t\t&__actions {\n\t\t\tmargin: 12px;\n\t\t\tfloat: right;\n\t\t}\n\t}\n\n\t&__import {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 10px;\n\n\t\tinput[type=file] {\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&__type {\n\t\t\tdisplay: flex;\n\t\t\tgap: 0 20px;\n\t\t\tflex-wrap: wrap;\n\n\t\t\t> div {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 5px;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\n\t\t&__hints {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\n\t\t&__actions {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: 15px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const r=s},74292:(t,e,a)=>{"use strict";a.d(e,{A:()=>B});var i=a(76904),n=a(92666),o=a(55233),s=a(93919),r=a(88302),l=a(99933),c=a(86451),d=a(11358),u=a(53334),p=a(51648),A=a(28290);const m={name:"MailboxPicker",components:{ButtonVue:i.x1,Modal:i.FH,IconInbox:o.A,IconDraft:s.A,IconSent:r.A,IconArchive:l.A,IconTrash:c.A,IconFolder:d.A,IconBreadcrumb:n.A,IconLoading:i.ne},props:{account:{type:Object,required:!0},selected:{type:Number,required:!1,default:void 0},loading:{type:Boolean,required:!1,default:!1},labelSelect:{type:String,default:(0,u.Tl)("mail","Choose")},labelSelectLoading:{type:String,default:(0,u.Tl)("mail","Choose")},pickedMailbox:{type:Object,required:!1,default:()=>{}},allowRoot:{type:Boolean,default:!1}},data:()=>({selectedMailboxId:void 0,mailboxCrumbs:[]}),computed:{mailboxes(){return this.selectedMailboxId?this.$store.getters.getSubMailboxes(this.selectedMailboxId):this.$store.getters.getMailboxes(this.account.accountId)},filteredMailboxes(){return this.pickedMailbox?this.mailboxes.filter((t=>t.databaseId!==this.pickedMailbox.databaseId&&(0,A.w)(t,"k"))):this.mailboxes.filter((t=>(0,A.w)(t,"i")))}},methods:{getMailboxIcon:t=>t.specialRole?"icon-"+t.specialRole:"icon-folder",getMailboxTitle:t=>(0,p.T)(t),onClickHome(){this.selectedMailboxId=void 0,this.$emit("update:selected",void 0),this.mailboxCrumbs=[]},onClickCrumb(t){this.selectedMailboxId=this.mailboxCrumbs[t].databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs=this.mailboxCrumbs.slice(0,t+1)},onClickMailbox(t){this.selectedMailboxId=t.databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs.push(t)},onSelect(){this.$emit("select",this.selectedMailboxId)},onClose(){this.$emit("close")}}};var h=a(85072),b=a.n(h),g=a(97825),v=a.n(g),x=a(77659),f=a.n(x),C=a(55056),_=a.n(C),y=a(10540),w=a.n(y),I=a(41113),S=a.n(I),k=a(6413),M={};M.styleTagTransform=S(),M.setAttributes=_(),M.insert=f().bind(null,"head"),M.domAPI=v(),M.insertStyleElement=w(),b()(k.A,M),k.A&&k.A.locals&&k.A.locals;const B=(0,a(14486).A)(m,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{ref:"content",staticClass:"modal-content"},[e("h2",{staticClass:"oc-dialog-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Choose target mailbox"))+"\n\t\t")]),t._v(" "),e("span",{staticClass:"crumbs"},[e("div",{on:{click:function(e){return e.preventDefault(),t.onClickHome.apply(null,arguments)}}},[e("IconInbox",{attrs:{size:20}})],1),t._v(" "),t._l(t.mailboxCrumbs,(function(a,i){return e("div",{key:a.databaseId,staticClass:"level"},[e("IconBreadcrumb",{attrs:{size:20}}),t._v(" "),e("a",{on:{click:function(e){return e.preventDefault(),t.onClickCrumb(i)}}},[t._v("\n\t\t\t\t\t"+t._s(t.getMailboxTitle(a))+"\n\t\t\t\t")])],1)}))],2),t._v(" "),e("div",{staticClass:"mailbox-list"},[t.filteredMailboxes.length>0?e("ul",t._l(t.filteredMailboxes,(function(a){return e("li",{key:a.databaseId,on:{click:function(e){return e.preventDefault(),t.onClickMailbox(a)}}},["inbox"===a.specialRole?e("IconInbox",{attrs:{size:20}}):"drafts"===a.specialRole?e("IconDraft",{attrs:{size:20}}):"sent"===a.specialRole?e("IconSent",{attrs:{size:20}}):"archive"===a.specialRole?e("IconArchive",{attrs:{size:20}}):"trash"===a.specialRole?e("IconTrash",{attrs:{size:20}}):e("IconFolder",{attrs:{size:20}}),t._v(" "),e("div",{staticClass:"mailbox-title"},[t._v("\n\t\t\t\t\t\t"+t._s(t.getMailboxTitle(a))+"\n\t\t\t\t\t")])],1)})),0):e("IconFolder",{attrs:{size:65}}),t._v(" "),e("div",{staticClass:"empty-icon empty"}),t._v(" "),e("h2",[t._v(t._s(t.t("mail","No more submailboxes in here")))])],1),t._v(" "),e("div",{staticClass:"buttons"},[e("ButtonVue",{attrs:{type:"primary",disabled:t.loading||!t.allowRoot&&!t.selectedMailboxId,"aria-label":t.loading?t.labelSelectLoading:t.labelSelect},on:{click:t.onSelect},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):t._e()]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.loading?t.labelSelectLoading:t.labelSelect)+"\n\t\t\t")])],1)])])}),[],!1,null,"940b16c0",null).exports},17084:(e,a,i)=>{"use strict";i.d(a,{A:()=>se});var n=i(76904),o=i(71920),s=i(8252),r=i(63814),l=i(83503),c=i.n(l),d=i(10734),u=i.n(d),p=i(85745),A=i(97627),m=i(42),h=i(35527),b=i(11358),g=i(86578),v=i(77122),x=i(86451),f=i(27474),C=i(19947);const _={name:"NavigationAccount",components:{AppNavigationItem:n.G_,ActionButton:n.Ko,ActionCheckbox:n.RI,ActionInput:n.Az,ActionText:n.HO,AccountSettings:()=>Promise.all([i.e(978),i.e(165),i.e(480),i.e(961),i.e(535),i.e(730)]).then(i.bind(i,6733)),IconInfo:m.A,IconSettings:h.A,IconFolderAdd:b.A,MenuDown:g.A,MenuUp:v.A,IconDelete:x.A,IconError:f.A,IconBullet:C.A,IconLoading:n.ne},props:{account:{type:Object,required:!0},firstMailbox:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:()=>({menuOpen:!1,loading:{delete:!1},savingShowOnlySubscribed:!1,quota:void 0,editing:!1,showSaving:!1,showSettings:!1,createMailboxName:""}),computed:{visible(){return!0!==this.account.isUnified&&!1!==this.account.visible},firstMailboxRoute(){return this.firstMailbox&&!this.isDisabled?{name:"mailbox",params:{mailboxId:this.firstMailbox.databaseId}}:""},id(){return"account-"+this.account.id},bulletColor(){return this.account.error?void 0:(t=>{const e=c()(t),a=u().hex.hsl(e),i=[40*Math.round(a[0]/40),a[1],a[2]];return"#"+u().hsl.hex(i)})(this.account.emailAddress)},quotaText(){return void 0===this.quota?t("mail","Loading …"):!1===this.quota?t("mail","Not supported by the server"):t("mail","{usage} of {limit} used",{usage:(0,s.v7)(this.quota.usage),limit:(0,s.v7)(this.quota.limit)})}},methods:{createMailbox(t){this.editing=!0;const e=this.createMailboxName;p.A.info("creating mailbox "+e),this.menuOpen=!1,this.$store.dispatch("createMailbox",{account:this.account,name:e}).then((()=>p.A.info("mailbox ".concat(e," created")))).catch((t=>{throw p.A.error("could not create mailbox",{error:t}),t})),this.editing=!1,this.showSaving=!1},openCreateMailbox(){this.editing=!0,this.showSaving=!1},removeAccount(){const e=this.account.id;p.A.info("delete account",{account:this.account});const a=t("mail","The account for {email} and cached email data will be removed from Nextcloud, but not from your email provider.",{email:this.account.emailAddress});OC.dialogs.confirmDestructive(a,t("mail","Remove account {email}",{email:this.account.emailAddress}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Remove {email}",{email:this.account.emailAddress}),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.$store.dispatch("deleteAccount",this.account).then((()=>{this.loading.delete=!0})).then((()=>{p.A.info("account ".concat(e," deleted, redirecting …")),location.href=(0,r.Jv)("/apps/mail")})).catch((t=>p.A.error("could not delete account",{error:t})));this.loading.delete=!1}))},changeAccountOrderUp(){this.$store.dispatch("moveAccount",{account:this.account,up:!0}).catch((t=>p.A.error("could not move account up",{error:t})))},changeAccountOrderDown(){this.$store.dispatch("moveAccount",{account:this.account}).catch((t=>p.A.error("could not move account down",{error:t})))},changeShowSubscribedOnly(t){this.savingShowOnlySubscribed=!0,this.$store.dispatch("patchAccount",{account:this.account,data:{showSubscribedOnly:t}}).then((()=>{this.savingShowOnlySubscribed=!1,p.A.info("show only subscribed mailboxes updated to "+t)})).catch((t=>{throw p.A.error("could not update subscription mode",{error:t}),this.savingShowOnlySubscribed=!1,t}))},onMenuToggle(t){t&&(console.debug("accounts menu opened, fetching quota"),this.fetchQuota())},async fetchQuota(){const t=await(0,A.FY)(this.account.id);console.debug("quota fetched",{quota:t}),this.quota=void 0!==t&&t},toggleAccountSettings(){this.showSettings=!this.showSettings},showAccountSettings(){this.showSettings=!0}}};var y=i(14486);const w=(0,y.A)(_,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{key:t.id,attrs:{id:t.id,"menu-open":t.menuOpen,name:t.account.emailAddress,to:t.firstMailboxRoute,exact:!0},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.account.error||t.isDisabled?e("IconError",{attrs:{size:20}}):t.bulletColor?e("IconBullet",{attrs:{size:16,"fill-color":t.bulletColor}}):t._e()]},proxy:!0},{key:"actions",fn:function(){return[t.isDisabled?[e("ActionText",{attrs:{name:t.t("mail","Provisioned account is disabled")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}],null,!1,3812223437)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Please login using a password to enable this account. The current session is using passwordless authentication, e.g. SSO or WebAuthn."))+"\n\t\t\t")])]:[t.account.isUnified?t._e():e("ActionText",{attrs:{name:t.t("mail","Quota")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}],null,!1,3812223437)},[t._v("\n\t\t\t\t"+t._s(t.quotaText)+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.showAccountSettings,shortkey:t.toggleAccountSettings},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSettings",{attrs:{size:20}})]},proxy:!0}],null,!1,408832678)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Account settings"))+"\n\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:t.account.showSubscribedOnly,disabled:t.savingShowOnlySubscribed},on:{"update:checked":t.changeShowSubscribedOnly}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Show only subscribed mailboxes"))+"\n\t\t\t")]),t._v(" "),t.editing?t._e():e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add mailbox"))+"\n\t\t\t")]),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Mailbox name"))+"\n\t\t\t")]):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t\t")]):t._e(),t._v(" "),t.isFirst?t._e():e("ActionButton",{on:{click:t.changeAccountOrderUp},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuUp",{attrs:{size:20}})]},proxy:!0}],null,!1,859424094)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move up"))+"\n\t\t\t")]),t._v(" "),t.isLast?t._e():e("ActionButton",{on:{click:t.changeAccountOrderDown},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuDown",{attrs:{size:20}})]},proxy:!0}],null,!1,3657048169)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move down"))+"\n\t\t\t")]),t._v(" "),t.account.provisioningId?t._e():e("ActionButton",{on:{click:t.removeAccount},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Remove account"))+"\n\t\t\t")])]]},proxy:!0},{key:"extra",fn:function(){return[e("AccountSettings",{attrs:{open:t.showSettings,account:t.account},on:{"update:open":t.toggleAccountSettings}})]},proxy:!0}],null,!1,3834829510)}):t._e()}),[],!1,null,null,null).exports,I={name:"NavigationAccountExpandCollapse",components:{AppNavigationItem:n.G_},props:{account:{type:Object,required:!0}},computed:{id(){return"collapse-"+this.account.id},title(){return this.account.collapsed&&this.account.showSubscribedOnly?t("mail","Show all subscribed mailboxes"):this.account.collapsed&&!this.account.showSubscribedOnly?t("mail","Show all mailboxes"):t("mail","Collapse mailboxes")}},methods:{async toggleCollapse(){p.A.debug("toggling collapsed mailboxes for account "+this.account.id);try{await this.$store.commit("toggleAccountCollapsed",this.account.id),await this.$store.dispatch("setAccountSetting",{accountId:this.account.id,key:"collapsed",value:this.account.collapsed})}catch(t){p.A.error("could not update account settings",{error:t})}}}};var S=i(85072),k=i.n(S),M=i(97825),B=i.n(M),D=i(77659),T=i.n(D),N=i(55056),E=i.n(N),P=i(10540),O=i.n(P),z=i(41113),R=i.n(z),$=i(52701),U={};U.styleTagTransform=R(),U.setAttributes=E(),U.insert=T().bind(null,"head"),U.domAPI=B(),U.insertStyleElement=O(),k()($.A,U),$.A&&$.A.locals&&$.A.locals;const L=(0,y.A)(I,(function(){var t=this;return(0,t._self._c)("AppNavigationItem",{attrs:{name:t.title},on:{click:t.toggleCollapse}})}),[],!1,null,"a2b1891e",null).exports;var F=i(36216),q=i(33767),Y=i(21025),G=i(92761),H=i(26623),K=i(89375),V=i(25956),j=i(93919),W=i(99933),Q=i(55233),X=i(22412),J=i(89977),Z=i(72901),tt=i(53210),et=i(88302),at=i(21304);const it={name:"MoveMailboxModal",components:{MailboxPicker:i(74292).A},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:()=>({moving:!1,destMailboxId:void 0}),methods:{onClose(){this.$emit("close")},async onMove(){if(this.moving=!0,this.mailbox.id!==this.destMailboxId)try{if(this.destMailboxId){const t=this.$store.getters.getMailbox(this.destMailboxId).name+this.mailbox.delimiter+this.mailbox.name;await this.$store.dispatch("renameMailbox",{account:this.account,mailbox:this.mailbox,newName:t})}else{const t=this.mailbox.displayName;await this.$store.dispatch("renameMailbox",{account:this.account,mailbox:this.mailbox,newName:t})}}catch(t){p.A.error("could not move mailbox",{error:t})}finally{this.moving=!1,this.$emit("close")}},genId:t=>"mailbox-"+t.databaseId}},nt=(0,y.A)(it,(function(){var t=this;return(0,t._self._c)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"picked-mailbox":t.mailbox,"allow-root":!0,"label-select":t.t("mail","Move"),"label-select-loading":t.t("mail","Moving")},on:{"update:selected":function(e){t.destMailboxId=e},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports;var ot=i(87314),st=i(28290),rt=i(1055),lt=i(50966),ct=i(53334),dt=i(51648),ut=i(85168),pt=i(62069),At=i(35630);class mt{constructor(t,e,a){this.el=t,this.options=a,this.registerListeners.bind(this)(t),this.setInitialAttributes()}setInitialAttributes(){this.draggableInfo={},this.setStatus("enabled")}update(t,e){this.setInitialAttributes(),this.options=e.options}registerListeners(t){At.A.on("drag-start",this.onDragStart.bind(this)),At.A.on("drag-end",this.onDragEnd.bind(this)),t.firstChild.addEventListener("dragover",this.onDragOver.bind(this)),t.firstChild.addEventListener("dragleave",this.onDragLeave.bind(this)),t.firstChild.addEventListener("drop",this.onDrop.bind(this))}removeListeners(t){At.A.off("drag-start",this.onDragStart),At.A.off("drag-end",this.onDragEnd),t.firstChild.removeEventListener("dragover",this.onDragOver),t.firstChild.removeEventListener("dragleave",this.onDragLeave),t.firstChild.removeEventListener("drop",this.onDrop)}setStatus(t){this.el.setAttribute("droppable-mailbox",t)}onDragStart(t){this.draggableInfo=t,this.canBeDropped()||this.setStatus("disabled")}canBeDropped(){return this.isSameAccount()&&this.options.isValidDropTarget}isSameAccount(){return this.draggableInfo.accountId===this.options.accountId}onDragEnd(){this.setInitialAttributes()}onDragOver(t){t.preventDefault(),this.draggableInfo.mailboxId!==this.options.mailboxId&&(this.options.isValidDropTarget&&this.setStatus("dragover"),t.dataTransfer.dropEffect="move")}onDragLeave(t){t.preventDefault(),this.setStatus("enabled")}async onDrop(t){if(t.preventDefault(),this.draggableInfo.mailboxId===this.options.mailboxId)return;this.setInitialAttributes();const e=JSON.parse(t.dataTransfer.getData("text"));At.A.emit("envelopes-dropped",{envelopes:e});try{const t=e.map((async t=>await this.processDroppedItem(t)));await Promise.all(t)}catch(t){p.A.error("could not process dropped messages",t)}finally{At.A.emit("envelopes-moved",{mailboxId:this.options.mailboxId,movedEnvelopes:e})}}async processDroppedItem(t){const e=document.querySelector('[data-envelope-id="'.concat(t.databaseId,'"]'));e.setAttribute("draggable-envelope","pending");try{await pt.A.dispatch("moveThread",{envelope:t,destMailboxId:this.options.mailboxId})}catch(t){e.removeAttribute("draggable-envelope"),p.A.error("could not move messages",t)}}}let ht;const bt={bind(t,e,a){ht=new mt(t,a.context,e.value)},componentUpdated(t,e){ht.options=e.value,ht.update(t,ht)}};var gt=i(21910);const vt={name:"NavigationMailbox",components:{AppNavigationItem:n.G_,CounterBubble:n.E7,ActionText:n.HO,ActionButton:n.Ko,ActionCheckbox:n.RI,ActionInput:n.Az,IconSend:et.A,IconDelete:x.A,IconEmailCheck:F.A,IconExternal:q.A,IconFolderAdd:G.A,IconFolderRename:K.A,IconFolderSync:V.A,IconInfo:m.A,IconAllInboxes:J.A,IconFavorite:H.A,IconFolder:b.A,IconFolderShared:Y.A,IconDraft:j.A,IconArchive:W.A,IconJunk:X.A,IconInbox:Q.A,IconWrench:at.A,EraserVariant:Z.A,ImportantIcon:tt.A,IconLoading:n.ne,MoveMailboxModal:nt,AlarmIcon:gt.A},directives:{droppableMailbox:bt},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},filter:{type:String,default:"",required:!1}},data(){var t;return{debug:(null===(t=window)||void 0===t||null===(t=t.OC)||void 0===t?void 0:t.debug)||!1,mailboxStats:void 0,loadingMarkAsRead:!1,clearingCache:!1,showSaving:!1,changeSubscription:!1,changingSyncInBackground:!1,editing:!1,showSubMailboxes:!1,menuOpen:!1,renameLabel:!0,renameInput:!1,mailboxName:this.mailbox.displayName,showMoveModal:!1,hasDelimiter:!!this.mailbox.delimiter,UNIFIED_INBOX_ID:ot.mH,createMailboxName:"",repairing:!1}},computed:{visible(){return(!1===this.account.showSubscribedOnly||this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed"))&&this.isUnifiedButOnlyInbox},notInbox(){return"inbox"!==this.mailbox.name.toLowerCase()},notVirtual(){return!this.account.isUnified&&"flagged"!==this.mailbox.specialRole&&!this.filter},title(){return"starred"===this.filter?(0,dt.T)({...this.mailbox,specialUse:["flagged"]}):(0,dt.T)(this.mailbox)},to(){return{name:"mailbox",params:{mailboxId:this.mailbox.databaseId,filter:this.filter?this.filter:void 0}}},hasSubMailboxes(){return this.subMailboxes.length>0},subMailboxes(){return this.$store.getters.getSubMailboxes(this.mailbox.databaseId)},statsText(){return this.mailboxStats&&"total"in this.mailboxStats&&"unread"in this.mailboxStats?0===this.mailboxStats.unread?(0,ct.zw)("mail","{total} message","{total} messages",this.mailboxStats.total,{total:this.mailboxStats.total}):(0,ct.zw)("mail","{unread} unread of {total}","{unread} unread of {total}",this.mailboxStats.unread,{total:this.mailboxStats.total,unread:this.mailboxStats.unread}):t("mail","Loading …")},isSubscribed(){return this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed")},isDroppableSpecialMailbox(){return"starred"!==this.filter&&![this.account.draftsMailboxId,this.account.sentMailboxId].includes(this.mailbox.databaseId)},isActive(){return this.$route.params.mailboxId===this.mailbox.databaseId},isValidDropTarget(){return!(this.isActive||!this.hasInsertAcl)&&(this.isDroppableSpecialMailbox||!this.mailbox.specialRole&&!this.account.isUnified)},isUnifiedButOnlyInbox(){return!this.mailbox.isUnified||this.mailbox.specialUse.includes("inbox")&&this.$store.getters.accounts.length>2},showUnreadCounter(){return"starred"!==this.filter&&"trash"!==this.mailbox.specialRole&&(this.mailbox.unread>0||this.subCounter>0)},subCounter(){return this.subMailboxes.reduce(((t,e)=>t+e.unread),0)},hasRenameAcl(){if(!this.mailbox.myAcls)return!0;const t=this.$store.getters.getParentMailbox(this.mailbox.databaseId);return t&&t.myAcls?(0,st.w)(this.mailbox,"x")&&(0,st.w)(t,"k"):(0,st.w)(this.mailbox,"x")},hasInsertAcl(){return(0,st.w)(this.mailbox,"i")},hasSeenAcl(){return(0,st.w)(this.mailbox,"s")},hasSubmailboxActionAcl(){return(0,st.w)(this.mailbox,"k")},hasDeleteAcl(){return(0,st.w)(this.mailbox,"x")},hasClearMailboxAcl(){return(0,st.w)(this.mailbox,"te")}},mounted(){At.A.on("drag-start",this.onDragStart),At.A.on("drag-end",this.onDragEnd),At.A.on("envelopes-moved",this.onEnvelopesMoved)},beforeDestroy(){At.A.off("drag-start",this.onDragStart),At.A.off("drag-end",this.onDragEnd),At.A.off("envelopes-moved",this.onEnvelopesMoved)},methods:{genId:t=>"mailbox-"+t.databaseId,onMenuToggle(t){t&&this.fetchMailboxStats()},async fetchMailboxStats(){if(this.mailboxStats=null,!this.account.isUnified&&"flagged"!==this.mailbox.specialRole)try{const t=await(0,lt.Np)(this.mailbox.databaseId);p.A.debug("loaded mailbox stats for ".concat(this.mailbox.databaseId),{stats:t}),this.mailboxStats=t}catch(t){this.mailboxStats={error:!0},p.A.error("could not load mailbox stats for ".concat(this.mailbox.databaseId),t)}},async createMailbox(t){this.editing=!0;const e=this.createMailboxName,a=this.mailbox.name+this.mailbox.delimiter+e;p.A.info("creating mailbox ".concat(a," as submailbox of ").concat(this.mailbox.databaseId)),this.menuOpen=!1;try{await this.$store.dispatch("createMailbox",{account:this.account,name:a})}catch(t){throw p.A.error("could not create mailbox ".concat(a),{error:t}),t}finally{this.editing=!1,this.showSaving=!1}p.A.info("mailbox ".concat(a," created")),this.showSubMailboxes=!0},openCreateMailbox(){this.editing=!0,this.showSaving=!1},markAsRead(){this.loadingMarkAsRead=!0,this.$store.dispatch("markMailboxRead",{accountId:this.account.id,mailboxId:this.mailbox.databaseId}).then((()=>p.A.info("mailbox ".concat(this.mailbox.databaseId," marked as read")))).catch((t=>p.A.error("could not mark mailbox ".concat(this.mailbox.databaseId," as read"),{error:t}))).then((()=>this.loadingMarkAsRead=!1))},async changeFolderSubscription(t){try{this.changeSubscription=!0,await this.$store.dispatch("changeMailboxSubscription",{mailbox:this.mailbox,subscribed:t})}catch(t){throw p.A.error("could not update subscription of mailbox ".concat(this.mailbox.databaseId),{error:t}),t}finally{this.changeSubscription=!1}},async changeSyncInBackground(t){try{this.changingSyncInBackground=!0,await this.$store.dispatch("patchMailbox",{mailbox:this.mailbox,attributes:{syncInBackground:t}})}catch(t){throw p.A.error("could not update background sync flag of mailbox ".concat(this.mailbox.databaseId),{error:t}),t}finally{this.changingSyncInBackground=!1}},async clearCache(){try{this.clearingCache=!0,p.A.debug("clearing message cache",{accountId:this.account.id,mailboxId:this.mailbox.databaseId}),await(0,rt.IL)(this.account.id,this.mailbox.databaseId),window.location.reload(!1)}finally{this.clearCache=!1}},clearMailbox(){const e=this.mailbox.databaseId;OC.dialogs.confirmDestructive(t("mail","All messages in mailbox will be deleted."),t("mail","Clear mailbox {name}",{name:this.mailbox.displayName}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Clear mailbox"),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.$store.dispatch("clearMailbox",{mailbox:this.mailbox}).then((()=>{p.A.info("mailbox ".concat(e," cleared"))})).catch((t=>p.A.error("could not clear mailbox",{error:t})))}))},deleteMailbox(){const e=this.mailbox.databaseId;p.A.info("delete mailbox",{mailbox:this.mailbox}),OC.dialogs.confirmDestructive(t("mail","The mailbox and all messages in it will be deleted."),t("mail","Delete mailbox"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Delete mailbox {name}",{name:this.mailbox.displayName}),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.$store.dispatch("deleteMailbox",{mailbox:this.mailbox}).then((()=>{p.A.info("mailbox ".concat(e," deleted")),parseInt(this.$route.params.mailboxId,10)===this.mailbox.databaseId&&this.$router.push({name:"mailbox",params:{mailboxId:ot.U8}})})).catch((t=>p.A.error("could not delete mailbox",{error:t})))}))},async renameMailbox(){this.renameInput=!1,this.showSaving=!0;try{let t=this.mailboxName;this.mailbox.path&&(t=this.mailbox.path+this.mailbox.delimiter+t),await this.$store.dispatch("renameMailbox",{account:this.account,mailbox:this.mailbox,newName:t}),this.renameLabel=!0,this.renameInput=!1}catch(e){(0,ut.cf)(t("mail","An error occurred, unable to rename the mailbox.")),console.error(e)}finally{this.showSaving=!1}},openRenameInput(){this.renameLabel=!1,this.renameInput=!0,this.showSaving=!1},onOpenMoveModal(){this.showMoveModal=!0},onCloseMoveModal(){this.showMoveModal=!1},onDragStart(t){let{accountId:e}=t;e===this.mailbox.accountId&&(this.$store.commit("expandAccount",e),this.showSubMailboxes=!0)},onDragEnd(t){let{accountId:e}=t;e===this.mailbox.accountId&&(this.showSubMailboxes=!1)},onEnvelopesMoved(t){let{mailboxId:e,movedEnvelopes:a}=t;if(this.mailbox.databaseId!==e)return;const i=a.find((t=>t.envelopeId===this.$route.params.threadId));var n;"message"===this.$route.name&&i&&this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(n=this.$route.params)||void 0===n?void 0:n.filter}})},async repair(){this.repairing=!0;const e=this.mailbox.databaseId;try{await(0,lt.AF)(e),await this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId}}),window.location.reload()}catch(e){var a;if(this.repairing=!1,429!==(null===(a=e.response)||void 0===a?void 0:a.status))throw e;(0,ut.Qg)(t("mail","Please wait 10 minutes before repairing again"))}}}};var xt=i(82411),ft={};ft.styleTagTransform=R(),ft.setAttributes=E(),ft.insert=T().bind(null,"head"),ft.domAPI=B(),ft.insertStyleElement=O(),k()(xt.A,ft),xt.A&&xt.A.locals&&xt.A.locals;const Ct=(0,y.A)(vt,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{directives:[{name:"droppable-mailbox",rawName:"v-droppable-mailbox",value:{mailboxId:t.mailbox.databaseId,accountId:t.mailbox.accountId,isValidDropTarget:t.isValidDropTarget},expression:"{\n\t\tmailboxId: mailbox.databaseId,\n\t\taccountId: mailbox.accountId,\n\t\tisValidDropTarget,\n\t}"}],key:t.genId(t.mailbox),attrs:{id:t.genId(t.mailbox),"allow-collapse":t.hasSubMailboxes,"menu-open":t.menuOpen,"force-menu":!0,name:t.title,to:t.to,open:t.showSubMailboxes},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e},"update:open":function(e){t.showSubMailboxes=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("div",[t.mailbox.isPriorityInbox?e("ImportantIcon",{attrs:{size:20}}):t.mailbox.id===t.UNIFIED_INBOX_ID?e("IconAllInboxes",{attrs:{size:20}}):"inbox"!==t.mailbox.specialRole||t.mailbox.isPriorityInbox||"starred"===t.filter?"starred"===t.filter?e("IconFavorite",{attrs:{size:20}}):t.mailbox.databaseId===t.account.draftsMailboxId?e("IconDraft",{attrs:{size:20}}):t.mailbox.databaseId===t.account.sentMailboxId?e("IconSend",{attrs:{size:20}}):t.mailbox.databaseId===t.account.archiveMailboxId?e("IconArchive",{attrs:{size:20}}):t.mailbox.databaseId===t.account.trashMailboxId?e("IconDelete",{attrs:{size:20}}):t.mailbox.databaseId===t.account.junkMailboxId?e("IconJunk",{attrs:{size:20}}):t.mailbox.databaseId===t.account.snoozeMailboxId?e("AlarmIcon",{attrs:{size:20}}):t.mailbox.shared?e("IconFolderShared",{attrs:{size:20}}):e("IconFolder",{attrs:{size:20}}):e("IconInbox",{attrs:{size:20}})],1)]},proxy:!0},{key:"actions",fn:function(){return[t.account.isUnified||"flagged"===t.mailbox.specialRole?t._e():e("ActionText",{attrs:{name:t.mailbox.name},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{title:t.statsText,size:20}})]},proxy:!0}],null,!1,3059915399)},[t._v("\n\t\t\t"+t._s(t.statsText)+"\n\t\t")]),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasSeenAcl?e("ActionButton",{attrs:{name:t.t("mail","Mark all as read"),disabled:t.loadingMarkAsRead},on:{click:t.markAsRead},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmailCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,46646313)},[t._v("\n\t\t\t"+t._s(t.t("mail","Mark all messages of this mailbox as read"))+"\n\t\t")]):t._e(),t._v(" "),!t.editing&&!t.account.isUnified&&t.hasDelimiter&&"flagged"!==t.mailbox.specialRole&&t.hasSubmailboxActionAcl?e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)},[t._v("\n\t\t\t"+t._s(t.t("mail","Add submailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2169509812)}):t._e(),t._v(" "),t.renameLabel&&!t.hasSubMailboxes&&!t.account.isUnified&&t.hasRenameAcl?e("ActionButton",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openRenameInput.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{size:20}})]},proxy:!0}],null,!1,2880355077)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit name"))+"\n\t\t")]):t._e(),t._v(" "),t.renameInput?e("ActionInput",{attrs:{value:t.mailboxName},on:{"update:value":function(e){t.mailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.renameMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{title:t.t("mail","Edit name"),size:20}})]},proxy:!0}],null,!1,2185581176)}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||!t.hasDelimiter||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{attrs:{id:t.genId(t.mailbox),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconExternal",{attrs:{size:20}})]},proxy:!0}],null,!1,1464797790)},[t._v("\n\t\t\t"+t._s(t.t("mail","Move mailbox"))+"\n\t\t")]),t._v(" "),t.account.isUnified||"flagged"===t.mailbox.specialRole?t._e():e("ActionButton",{attrs:{disabled:t.repairing},on:{click:t.repair},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconWrench",{attrs:{size:16}})]},proxy:!0}],null,!1,2197471619)},[t._v("\n\t\t\t"+t._s(t.t("mail","Repair mailbox"))+"\n\t\t")]),t._v(" "),t.debug&&!t.account.isUnified&&"flagged"!==t.mailbox.specialRole?e("ActionButton",{attrs:{name:t.t("mail","Clear cache"),disabled:t.clearingCache},on:{click:t.clearCache},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderSync",{attrs:{size:20}})]},proxy:!0}],null,!1,3488227250)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear locally cached data, in case there are issues with synchronization."))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual?e("ActionCheckbox",{attrs:{checked:t.isSubscribed,disabled:t.changeSubscription},on:{"update:checked":t.changeFolderSubscription}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subscribed"))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual&&t.notInbox?e("ActionCheckbox",{attrs:{checked:t.mailbox.syncInBackground,disabled:t.changingSyncInBackground},on:{"update:checked":t.changeSyncInBackground}},[t._v("\n\t\t\t"+t._s(t.t("mail","Sync in background"))+"\n\t\t")]):t._e(),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasClearMailboxAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.clearMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EraserVariant",{attrs:{size:20}})]},proxy:!0}],null,!1,3994454445)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear mailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{on:{click:t.deleteMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete mailbox"))+"\n\t\t")])]},proxy:!0},{key:"counter",fn:function(){return[t.showUnreadCounter&&t.subCounter?e("CounterBubble",[t._v("\n\t\t\t"+t._s(t.mailbox.unread)+" ("+t._s(t.subCounter)+")\n\t\t")]):t.showUnreadCounter?e("CounterBubble",[t._v("\n\t\t\t"+t._s(t.mailbox.unread)+"\n\t\t")]):t._e()]},proxy:!0},{key:"extra",fn:function(){return[t.showMoveModal?e("MoveMailboxModal",{attrs:{account:t.account,mailbox:t.mailbox},on:{close:t.onCloseMoveModal}}):t._e()]},proxy:!0}],null,!1,208405832)},[t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._l(t.subMailboxes,(function(a){return e("NavigationMailbox",{key:t.genId(a),attrs:{account:t.account,mailbox:a}})}))],2):t._e()}),[],!1,null,"4cbe63d2",null).exports;var _t=i(8448);const yt={name:"NavigationOutbox",components:{AppNavigationItem:n.G_,CounterBubble:n.E7,IconOutbox:_t.A},computed:{count(){return this.$store.getters["outbox/getAllMessages"].length},to:()=>({name:"outbox"})}};var wt=i(11649),It={};It.styleTagTransform=R(),It.setAttributes=E(),It.insert=T().bind(null,"head"),It.domAPI=B(),It.insertStyleElement=O(),k()(wt.A,It),wt.A&&wt.A.locals&&wt.A.locals;const St=(0,y.A)(yt,(function(){var t=this,e=t._self._c;return e("AppNavigationItem",{key:"navigation-outbox",attrs:{id:"navigation-outbox",name:t.t("mail","Outbox"),to:t.to},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconOutbox",{staticClass:"outbox-opacity-icon",attrs:{size:20}})]},proxy:!0},{key:"counter",fn:function(){return[t.count?e("CounterBubble",{staticClass:"navigation-outbox__unread-counter"},[t._v("\n\t\t\t"+t._s(t.count)+"\n\t\t")]):t._e()]},proxy:!0}])})}),[],!1,null,"51f8f325",null).exports;var kt=i(31965),Mt=i(49954),Bt=i(7783),Dt=i(44843),Tt=i(7567),Nt=i(72018),Et=i(95353),Pt=i(51651),Ot=i(39547),zt=i.n(Ot);class Rt extends Error{constructor(){super(),this.name=Rt.name}}const $t="pkcs12",Ut={name:"SmimeCertificateModal",components:{NcModal:n.FH,NcButton:n.x1,NcPasswordField:n.b9,NcEmptyContent:n.yI,DeleteIcon:x.A},data:()=>({TYPE_PKCS12:$t,TYPE_PEM:"pem",moment:Pt.A,showImportScreen:!1,loading:!1,certificateType:$t,certificate:void 0,privateKey:void 0,password:""}),computed:{...(0,Et.L8)({certificates:"getSmimeCertificates"}),inputFormIsValid(){return!!this.certificate}},async mounted(){await this.$store.dispatch("fetchSmimeCertificates")},methods:{async deleteCertificate(t){await this.$store.dispatch("deleteSmimeCertificate",t)},async uploadCertificate(){let e,a=this.$refs.certificate.files[0];if(this.certificateType===$t)try{const t=function(t,e){const a=new(zt().util.ByteBuffer)(t),i=zt().asn1.fromDer(a),n=zt().pkcs12.pkcs12FromAsn1(i,e),o=t=>n.getBags({bagType:t})[t],s=o(zt().pki.oids.certBag),r=o(zt().pki.oids.pkcs8ShroudedKeyBag);if(0===s.length)throw new Rt("The PKCS #12 certificate must contain at least one certificate");if(1!==r.length)throw new Rt("The PKCS #12 certificate must contain a single key");return{certificate:s.map((t=>zt().pki.certificateToPem(t.cert))).join("\r\n"),privateKey:zt().pki.privateKeyToPem(r[0].key)}}(await a.arrayBuffer(),this.password);a=new Blob([t.certificate]),e=new Blob([t.privateKey])}catch(e){return void(e.name===Rt.name?(p.A.error("PKCS #12 certificate contains multiple certs or keys",{error:e}),(0,ut.Qg)(t("mail","The provided PKCS #12 certificate must contain at least one certificate and exactly one private key."))):(p.A.debug("Is probably not a PKCS #12 certificate or the password is wrong",{error:e}),(0,ut.Qg)(t("mail","Failed to import the certificate. Please check the password."))))}else{if("pem"!==this.certificateType)return;e=this.$refs.privateKey.files[0]}this.loading=!0;try{await this.$store.dispatch("createSmimeCertificate",{certificate:a,privateKey:e}),(0,ut.Te)(t("mail","Certificate imported successfully")),this.resetImportForm()}catch(a){var i;p.A.error("Failed to import a S/MIME certificate: ".concat(null===(i=a.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.data),{error:a}),e?(0,ut.Qg)(t("mail","Failed to import the certificate. Please make sure that the private key matches the certificate and is not protected by a passphrase.")):(0,ut.Qg)(t("mail","Failed to import the certificate"))}finally{this.loading=!1}},resetImportForm(){this.certificateType=$t,this.showImportScreen=!1,this.certificate=void 0,this.privateKey=void 0,this.password=""}}};var Lt=i(4503),Ft={};Ft.styleTagTransform=R(),Ft.setAttributes=E(),Ft.insert=T().bind(null,"head"),Ft.domAPI=B(),Ft.insertStyleElement=O(),k()(Lt.A,Ft),Lt.A&&Lt.A.locals&&Lt.A.locals;const qt=(0,y.A)(Ut,(function(){var t=this,e=t._self._c;return e("NcModal",{on:{close:function(e){return t.$emit("close")}}},[e("div",{staticClass:"certificate-modal"},[t.showImportScreen?e("form",{staticClass:"certificate-modal__import",on:{submit:function(e){return e.preventDefault(),t.uploadCertificate.apply(null,arguments)}}},[e("h2",[t._v(t._s(t.t("mail","Import S/MIME certificate")))]),t._v(" "),e("fieldset",{staticClass:"certificate-modal__import__type"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pkcs12",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PKCS12,checked:t._q(t.certificateType,t.TYPE_PKCS12)},on:{change:function(e){t.certificateType=t.TYPE_PKCS12}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pkcs12"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PKCS #12 Certificate"))+"\n\t\t\t\t\t")])]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pem",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PEM,checked:t._q(t.certificateType,t.TYPE_PEM)},on:{change:function(e){t.certificateType=t.TYPE_PEM}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pem"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PEM Certificate"))+"\n\t\t\t\t\t")])])]),t._v(" "),e("fieldset",[e("label",{attrs:{for:"certificate"}},[t._v(t._s(t.t("mail","Certificate")))]),t._v(" "),e("input",{ref:"certificate",attrs:{id:"certificate",type:"file",required:""},on:{change:function(e){t.certificate=e.target.files[0]}}})]),t._v(" "),t.certificateType===t.TYPE_PEM?e("fieldset",[e("label",{attrs:{for:"private-key"}},[t._v(t._s(t.t("mail","Private key (optional)")))]),t._v(" "),e("input",{ref:"privateKey",attrs:{id:"private-key",type:"file"},on:{change:function(e){t.privateKey=e.target.files[0]}}})]):t._e(),t._v(" "),t.certificateType===t.TYPE_PKCS12?e("fieldset",[e("label",{attrs:{for:"password"}},[t._v(t._s(t.t("mail","Password")))]),t._v(" "),e("NcPasswordField",{attrs:{value:t.password,label:t.t("mail","Password")},on:{"update:value":function(e){t.password=e}}})],1):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__import__hints"},[t.certificateType===t.TYPE_PEM?e("p",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","The private key is only required if you intend to send signed and encrypted emails using this certificate."))+"\n\t\t\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"certificate-modal__import__actions"},[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Back")},on:{click:t.resetImportForm}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Back"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Submit"),"native-type":"submit",disabled:t.loading||!t.inputFormIsValid}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Submit"))+"\n\t\t\t\t")])],1)]):e("div",{staticClass:"certificate-modal__list"},[e("h2",[t._v(t._s(t.t("mail","S/MIME certificates")))]),t._v(" "),e("table",{staticClass:"certificate-modal__list__table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.t("mail","Certificate name")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","E-mail address")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","Valid until")))]),t._v(" "),e("th")])]),t._v(" "),e("tbody",t._l(t.certificates,(function(a){return e("tr",{key:a.id},[e("td",{attrs:{title:a.info.commonName}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.info.commonName)+"\n\t\t\t\t\t\t")]),t._v(" "),e("td",{attrs:{title:a.info.emailAddress}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.info.emailAddress)+"\n\t\t\t\t\t\t")]),t._v(" "),e("td",{attrs:{title:t.moment.unix(a.info.notAfter).format("LL")}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.moment.unix(a.info.notAfter).format("LL"))+"\n\t\t\t\t\t\t")]),t._v(" "),e("td",[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Delete certificate")},on:{click:function(e){return t.deleteCertificate(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete certificate"),size:20}})]},proxy:!0}],null,!0)})],1)])})),0)]),t._v(" "),0===t.certificates.length?e("NcEmptyContent",{staticClass:"certificate__empty",attrs:{name:t.t("mail","No certificate imported yet")}}):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__list__actions"},[e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Import certificate")},on:{click:function(e){t.showImportScreen=!0}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Import certificate"))+"\n\t\t\t\t")])],1)],1)])])}),[],!1,null,"86f871f0",null).exports;var Yt=i(37528),Gt=i(27742),Ht=i.n(Gt),Kt=i(10854);const Vt=i.n(Kt)()(Ht()("email")),jt={name:"TrustedSenders",components:{ButtonVue:n.x1},data:()=>({list:[]}),computed:{sortedSenders(){return Vt(this.list)}},async mounted(){this.list=await(0,Yt.E)()},methods:{async removeSender(e){this.list=this.list.filter((t=>t.id!==e.id));try{await(0,Yt.I)(e.email,e.type,!1)}catch(a){p.A.error("Could not remove trusted sender ".concat(e.email),{error:a}),(0,ut.Qg)(t("mail","Could not remove trusted sender {sender}",{sender:e.email})),this.list.push(e)}},senderType(e){switch(e){case"individual":return t("mail","individual");case"domain":return t("mail","domain")}return e}}};var Wt=i(36133),Qt={};Qt.styleTagTransform=R(),Qt.setAttributes=E(),Qt.insert=T().bind(null,"head"),Qt.domAPI=B(),Qt.insertStyleElement=O(),k()(Wt.A,Qt),Wt.A&&Wt.A.locals&&Wt.A.locals;const Xt=(0,y.A)(jt,(function(){var t=this,e=t._self._c;return e("div",[t._l(t.sortedSenders,(function(a){return e("div",{key:a.email},[t._v("\n\t\t"+t._s(a.email)+"\n\t\t"+t._s(t.senderType(a.type))+"\n\t\t"),e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary","aria-label":t.t("mail","Remove")},on:{click:function(e){return t.removeSender(a)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Remove"))+"\n\t\t")])],1)})),t._v(" "),t.sortedSenders.length?t._e():e("span",[t._v(" "+t._s(t.t("mail","No senders are trusted at the moment.")))])],2)}),[],!1,null,"19c067d8",null).exports;var Jt=i(16406);const Zt={name:"AppSettingsMenu",components:{TrustedSenders:Xt,NcButton:n.x1,IconEmail:Bt.A,IconAdd:Mt.A,IconLoading:n.ne,IconLock:Dt.A,SmimeCertificateModal:qt,NcCheckboxRadioSwitch:n.AO,NcAppSettingsDialog:n.q4,NcAppSettingsSection:n.Te,CompactMode:kt.A,VerticalSplit:Tt.A,HorizontalSplit:Nt.A},mixins:[Jt.A],props:{open:{required:!0,type:Boolean}},data:()=>({loadingAvatarSettings:!1,prioritySettingsText:t("mail","Search in the body of messages in priority Inbox"),loadingPrioritySettings:!1,optOutSettingsText:t("mail","Activate"),loadingOptOutSettings:!1,replySettingsText:t("mail","Put my text to the bottom of a reply instead of on top of it."),loadingReplySettings:!1,autoTaggingText:t("mail","Automatically classify importance of new email"),toggleAutoTagging:!1,displaySmimeCertificateModal:!1,sortOrder:"newest",showSettings:!1}),computed:{searchPriorityBody(){return"true"===this.$store.getters.getPreference("search-priority-body","false")},useBottomReplies(){return"bottom"===this.$store.getters.getPreference("reply-mode","top")},useExternalAvatars(){return"true"===this.$store.getters.getPreference("external-avatars","true")},useDataCollection(){return"true"===this.$store.getters.getPreference("collect-data","true")},useAutoTagging(){return"true"===this.$store.getters.getPreference("tag-classified-messages","true")},allowNewMailAccounts(){return this.$store.getters.getPreference("allow-new-accounts",!0)},layoutMode(){return this.$store.getters.getPreference("layout-mode","vertical-split")}},watch:{showSettings(t){t||this.$emit("update:open",t)},async open(t){t&&await this.onOpen()}},mounted(){this.sortOrder=this.$store.getters.getPreference("sort-order","newest")},methods:{async setLayout(t){try{await this.$store.dispatch("savePreference",{key:"layout-mode",value:t})}catch(t){p.A.error("Could not save preferences",{error:t})}},async onOpen(){this.showSettings=!0},onToggleButtonReplies(t){this.loadingReplySettings=!0,this.$store.dispatch("savePreference",{key:"reply-mode",value:t.target.checked?"bottom":"top"}).catch((t=>p.A.error("could not save preferences",{error:t}))).then((()=>{this.loadingReplySettings=!1}))},onToggleExternalAvatars(t){this.loadingAvatarSettings=!0,this.$store.dispatch("savePreference",{key:"external-avatars",value:t.target.checked?"true":"false"}).catch((t=>p.A.error("could not save preferences",{error:t}))).then((()=>{this.loadingAvatarSettings=!1}))},async onToggleSearchPriorityBody(t){this.loadingPrioritySettings=!0;try{await this.$store.dispatch("savePreference",{key:"search-priority-body",value:t.target.checked?"true":"false"})}catch(t){p.A.error("could not save preferences",{error:t})}finally{this.loadingPrioritySettings=!1}},onToggleCollectData(t){this.loadingOptOutSettings=!0,this.$store.dispatch("savePreference",{key:"collect-data",value:t.target.checked?"true":"false"}).catch((t=>p.A.error("could not save preferences",{error:t}))).then((()=>{this.loadingOptOutSettings=!1}))},async onSortByDate(e){const a=this.sortOrder;try{this.sortOrder=e,await this.$store.dispatch("savePreference",{key:"sort-order",value:e}),this.$store.commit("removeAllEnvelopes")}catch(e){p.A.error("could not save preferences",{error:e}),this.sortOrder=a,(0,ut.Qg)(t("mail","Could not update preference"))}},async onToggleAutoTagging(e){this.toggleAutoTagging=!0;try{await this.$store.dispatch("savePreference",{key:"tag-classified-messages",value:e.target.checked?"true":"false"})}catch(e){p.A.error("could not save preferences",{error:e}),(0,ut.Qg)(t("mail","Could not update preference"))}finally{this.toggleAutoTagging=!1}},registerProtocolHandler(){if(window.navigator.registerProtocolHandler){const t=window.location.protocol+"//"+window.location.host+(0,r.Jv)("apps/mail/compose?uri=%s");try{window.navigator.registerProtocolHandler("mailto",t,OC.theme.name+" Mail")}catch(t){p.A.error("could not register protocol handler",{err:t})}}}}};var te=i(78604),ee={};ee.styleTagTransform=R(),ee.setAttributes=E(),ee.insert=T().bind(null,"head"),ee.domAPI=B(),ee.insertStyleElement=O(),k()(te.A,ee),te.A&&te.A.locals&&te.A.locals;const ae=(0,y.A)(Zt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-settings"},[e("NcAppSettingsDialog",{attrs:{id:"app-settings-dialog",name:t.t("mail","Mail settings"),"show-navigation":!0,open:t.showSettings},on:{"update:open":function(e){t.showSettings=e}}},[t.isMobile?t._e():e("NcAppSettingsSection",{attrs:{id:"mail-list-view",name:t.t("mail","Layout")}},[e("NcCheckboxRadioSwitch",{attrs:{value:"no-split","button-variant":!0,name:"mail-layout",type:"radio",checked:t.layoutMode,"button-variant-grouped":"vertical"},on:{"update:checked":function(e){return t.setLayout("no-split")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CompactMode",{attrs:{size:20}})]},proxy:!0}],null,!1,3948876076)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","List"))+"\n\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{value:"vertical-split","button-variant":!0,name:"mail-layout",type:"radio",checked:t.layoutMode,"button-variant-grouped":"vertical"},on:{"update:checked":function(e){return t.setLayout("vertical-split")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("VerticalSplit",{attrs:{size:20}})]},proxy:!0}],null,!1,2412751144)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Vertical split"))+"\n\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{value:"horizontal-split","button-variant":!0,name:"mail-layout",type:"radio",checked:t.layoutMode,"button-variant-grouped":"vertical"},on:{"update:checked":function(e){return t.setLayout("horizontal-split")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("HorizontalSplit",{attrs:{size:20}})]},proxy:!0}],null,!1,858955076)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Horizontal split"))+"\n\t\t\t")])],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"account-settings",name:t.t("mail","Account creation")}},[t.allowNewMailAccounts?e("NcButton",{staticClass:"app-settings-button",attrs:{type:"primary",to:"/setup","aria-label":t.t("mail","Add mail account")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2388353250)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add mail account"))+"\n\t\t\t")]):t._e()],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"body-settings",name:t.t("mail","Activate body search")}},[t.loadingPrioritySettings?e("p",{staticClass:"app-settings"},[t._v("\n\t\t\t\t"+t._s(t.prioritySettingsText)+"\n\t\t\t")]):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"priority-inbox-toggle",type:"checkbox"},domProps:{checked:t.searchPriorityBody},on:{change:t.onToggleSearchPriorityBody}}),t._v(" "),e("label",{attrs:{for:"priority-inbox-toggle"}},[t._v(t._s(t.prioritySettingsText))])])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"data-settings",name:t.t("mail","Data collection consent")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Allow the app to collect data about your interactions. Based on this data, the app will adapt to your preferences. The data will only be stored locally."))+"\n\t\t\t")]),t._v(" "),t.loadingOptOutSettings?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t\t\t"+t._s(t.optOutSettingsText)+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"data-collection-toggle",type:"checkbox"},domProps:{checked:t.useDataCollection},on:{change:t.onToggleCollectData}}),t._v(" "),e("label",{attrs:{for:"data-collection-toggle"}},[t._v(t._s(t.optOutSettingsText))])])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"autotagging-settings",name:t.t("mail","Auto tagging text")}},[t.toggleAutoTagging?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t\t\t"+t._s(t.autoTaggingText)+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"auto-tagging-toggle",type:"checkbox"},domProps:{checked:t.useAutoTagging},on:{change:t.onToggleAutoTagging}}),t._v(" "),e("label",{attrs:{for:"auto-tagging-toggle"}},[t._v(t._s(t.autoTaggingText))])])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"trusted-sender",name:t.t("mail","Trusted senders")}},[e("TrustedSenders")],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"gravatar-settings",name:t.t("mail","Gravatar settings")}},[t.loadingAvatarSettings?e("p",{staticClass:"app-settings avatar-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t\t\t"+t._s(t.t("mail","Use Gravatar and favicon avatars"))+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"gravatar-enabled",type:"checkbox"},domProps:{checked:t.useExternalAvatars},on:{change:t.onToggleExternalAvatars}}),t._v(" "),e("label",{attrs:{for:"gravatar-enabled"}},[t._v(t._s(t.t("mail","Use Gravatar and favicon avatars")))])])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"reply-settings",name:t.t("mail","Reply text position")}},[t.loadingReplySettings?e("p",{staticClass:"app-settings reply-settings"},[e("IconLoading",{attrs:{size:20}}),t._v("\n\t\t\t\t"+t._s(t.replySettingsText)+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"bottom-reply-enabled",type:"checkbox"},domProps:{checked:t.useBottomReplies},on:{change:t.onToggleButtonReplies}}),t._v(" "),e("label",{attrs:{for:"bottom-reply-enabled"}},[t._v(t._s(t.replySettingsText))])])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"mailto-settings",name:t.t("mail","Mailto")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Register as application for mail links"))+"\n\t\t\t")]),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Register as application for mail links")},on:{click:t.registerProtocolHandler},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmail",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Register"))+"\n\t\t\t")])],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"smime-settings",name:t.t("mail","S/MIME")}},[e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Manage S/MIME certificates")},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.displaySmimeCertificateModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLock",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Manage S/MIME certificates"))+"\n\t\t\t")]),t._v(" "),t.displaySmimeCertificateModal?e("SmimeCertificateModal",{on:{close:function(e){t.displaySmimeCertificateModal=!1}}}):t._e()],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"sorting-settings",name:t.t("mail","Sorting")}},[e("div",{staticClass:"sorting"},[e("NcCheckboxRadioSwitch",{staticClass:"sorting__switch",attrs:{checked:t.sortOrder,value:"newest",name:"order_radio",type:"radio"},on:{"update:checked":t.onSortByDate}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Newest"))+"\n\t\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{staticClass:"sorting__switch",attrs:{checked:t.sortOrder,value:"oldest",name:"order_radio",type:"radio"},on:{"update:checked":t.onSortByDate}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Oldest"))+"\n\t\t\t\t")])],1)]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"mailvelope-settings",name:t.t("mail","Mailvelope")}},[e("p",{staticClass:"mailvelope-section"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Looking for a way to encrypt your emails?"))+"\n\t\t\t")]),t._v(" "),e("a",{attrs:{href:"https://www.mailvelope.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Install Mailvelope browser extension by clicking here"))+"\n\t\t\t")])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"keyboard-settings",name:t.t("mail","Keyboard")}},[e("dl",[e("div",[e("dt",[e("kbd",[t._v("C")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Compose new message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("←")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Newer message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("→")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Older message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("S")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle star")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("U")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle unread")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("A")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Archive")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Del")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Delete")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("F")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Search")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("Enter")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Send")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("R")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Refresh")))])])])])],1)],1)}),[],!1,null,"acb6365a",null).exports,ie={name:"Navigation",components:{NcButton:n.x1,AppNavigation:n.hN,AppNavigationSpacer:n.lJ,AppSettingsMenu:ae,NavigationAccount:w,NavigationAccountExpandCollapse:L,NavigationMailbox:Ct,NavigationOutbox:St,NewMessageButtonHeader:o.A,IconSetting:h.A},data:()=>({refreshing:!1,showSettings:!1}),computed:{menu(){return this.$store.getters.accounts.filter((t=>t.id!==ot.Hc)).map((t=>{const e=this.$store.getters.getMailboxes(t.id),a=e.filter((e=>this.isCollapsed(t,e))).length>1;return{id:t.id,account:t,mailboxes:e,isCollapsible:a}}))},unifiedAccount(){return this.$store.getters.getAccount(ot.Hc)},unifiedMailboxes(){return this.$store.getters.getMailboxes(ot.Hc)},passwordIsUnavailable(){return this.$store.getters.getPreference("password-is-unavailable",!1)},outboxMessages(){return this.$store.getters["outbox/getAllMessages"]}},methods:{showMailSettings(){this.showSettings=!0},isCollapsed:(t,e)=>"inbox"!==e.specialRole&&e.databaseId!==t.draftsMailboxId&&e.databaseId!==t.sentMailboxId&&e.databaseId!==t.trashMailboxId,isFirst(t){return t===this.$store.getters.accounts[1]},isLast(t){const e=this.$store.getters.accounts;return t===e[e.length-1]},isDisabled(t){return this.passwordIsUnavailable&&!!t.provisioningId&&!!this.$store.getters.masterPasswordEnabled}}};var ne=i(28043),oe={};oe.styleTagTransform=R(),oe.setAttributes=E(),oe.insert=T().bind(null,"head"),oe.domAPI=B(),oe.insertStyleElement=O(),k()(ne.A,oe),ne.A&&ne.A.locals&&ne.A.locals;const se=(0,y.A)(ie,(function(){var t=this,e=t._self._c;return e("AppNavigation",{scopedSlots:t._u([{key:"list",fn:function(){return[t._l(t.unifiedMailboxes,(function(a){return e("NavigationMailbox",{key:"mailbox-"+a.databaseId,attrs:{account:t.unifiedAccount,mailbox:a}})})),t._v(" "),e("AppNavigationSpacer"),t._v(" "),t._l(t.menu,(function(a){return[a.account?e("NavigationAccount",{key:a.account.id,attrs:{account:a.account,"first-mailbox":a.mailboxes[0],"is-first":t.isFirst(a.account),"is-last":t.isLast(a.account),"is-disabled":t.isDisabled(a.account)}}):t._e(),t._v(" "),t.isDisabled(a.account)?t._e():[t._l(a.mailboxes,(function(i){return[e("NavigationMailbox",{directives:[{name:"show",rawName:"v-show",value:!a.isCollapsible||!a.account.collapsed||!t.isCollapsed(a.account,i),expression:"\n\t\t\t\t\t\t\t!group.isCollapsible ||\n\t\t\t\t\t\t\t\t!group.account.collapsed ||\n\t\t\t\t\t\t\t\t!isCollapsed(group.account, item)\n\t\t\t\t\t\t"}],key:"mailbox-"+i.databaseId,attrs:{account:a.account,mailbox:i}}),t._v(" "),a.account.isUnified||"inbox"!==i.specialRole?t._e():e("NavigationMailbox",{key:i.databaseId+"-starred",attrs:{account:a.account,mailbox:i,filter:"starred"}})]})),t._v(" "),!a.account.isUnified&&a.isCollapsible?e("NavigationAccountExpandCollapse",{key:"collapse-"+a.account.id,attrs:{account:a.account}}):t._e(),t._v(" "),e("AppNavigationSpacer",{key:"spacer-"+a.account.id})]]}))]},proxy:!0},{key:"footer",fn:function(){return[0!==t.outboxMessages.length?e("div",{staticClass:"outbox__border"},[e("NavigationOutbox",{staticClass:"outbox"})],1):t._e(),t._v(" "),e("div",{staticClass:"mail-settings"},[e("NcButton",{staticClass:"mail-settings__button",attrs:{"close-after-click":!0},on:{click:t.showMailSettings},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSetting",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Mail settings"))+"\n\t\t\t")])],1)]},proxy:!0}])},[e("NewMessageButtonHeader"),t._v(" "),t._v(" "),t._v(" "),e("AppSettingsMenu",{attrs:{open:t.showSettings},on:{"update:open":function(e){t.showSettings=e}}})],1)}),[],!1,null,"0dd2ec61",null).exports},71920:(t,e,a)=>{"use strict";a.d(e,{A:()=>y});var i=a(76904),n=a(49954),o=a(15278),s=a(18126),r=a(85745);const l={name:"NewMessageButtonHeader",components:{ButtonVue:i.x1,IconAdd:n.A,IconRefresh:o.A,IconLoading:s.A},data:()=>({refreshing:!1}),computed:{currentMailbox(){if("message"===this.$route.name||"mailbox"===this.$route.name)return this.$store.getters.getMailbox(this.$route.params.mailboxId)}},methods:{async refreshMailbox(){if(!0!==this.refreshing){this.refreshing=!0;try{await this.$store.dispatch("syncEnvelopes",{mailboxId:this.currentMailbox.databaseId}),r.A.debug("Current mailbox is sync'ing ")}catch(t){r.A.error("could not sync current mailbox",{error:t})}finally{this.refreshing=!1}}else r.A.debug("already sync'ing mailbox.. aborting")},async onNewMessage(){await this.$store.dispatch("startComposerSession",{isBlankMessage:!0})}}};var c=a(85072),d=a.n(c),u=a(97825),p=a.n(u),A=a(77659),m=a.n(A),h=a(55056),b=a.n(h),g=a(10540),v=a.n(g),x=a(41113),f=a.n(x),C=a(77435),_={};_.styleTagTransform=f(),_.setAttributes=b(),_.insert=m().bind(null,"head"),_.domAPI=p(),_.insertStyleElement=v(),d()(C.A,_),C.A&&C.A.locals&&C.A.locals;const y=(0,a(14486).A)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("ButtonVue",{staticClass:"new-message-button",attrs:{"aria-label":t.t("mail","New message"),type:"primary","button-id":"mail_new_message",role:"complementary",wide:!0},on:{click:t.onNewMessage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","New message"))+"\n\t")]),t._v(" "),t.currentMailbox?e("ButtonVue",{staticClass:"refresh__button",attrs:{"aria-label":t.t("mail","Refresh"),type:"tertiary-no-background",disabled:t.refreshing},on:{click:t.refreshMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[t.refreshing?t._e():e("IconRefresh",{attrs:{size:20}}),t._v(" "),t.refreshing?e("IconLoading",{attrs:{size:20}}):t._e()]},proxy:!0}],null,!1,2669673868)}):t._e()],1)}),[],!1,null,"1e4c1175",null).exports},53210:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});const i={name:"ImportantIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},n=(0,a(14486).A)(i,(function(t,e){return t("span",e._g(e._b({staticClass:"material-design-icon important-icon",class:[e.data.class,e.data.staticClass],attrs:{"aria-hidden":!e.props.title,"aria-label":e.props.title,role:"img"}},"span",e.data.attrs,!1),e.listeners),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.props.fillColor,width:e.props.size,height:e.props.size,viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),e._v(" "),t("path",{attrs:{d:"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z"}})])])}),[],!0,null,null,null).exports},27518:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},27514:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},79722:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},86886:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"},50310:()=>{}}]);
//# sourceMappingURL=mail.319.1f9fabebd5f4089ccef4.js.map